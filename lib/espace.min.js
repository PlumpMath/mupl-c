/*! espace 2014-05-30; Copyright 2014 Adrian Toncean; released under the MIT license */
!function(){"use strict";var a={};a.parse=function(a){var b,c=[],d=null,e=a[0];if("("!==e.type){if(")"===e.type){var f=new Error("Cannot start with )");throw f.coords=e.coords,f}if(a.length>1){var f=new Error("Unexpected token");throw f.coords=e.coords,f}return b={token:e}}d={token:e,tree:[]},b=d,c.push(d);for(var g=1;g<a.length;g++)if(e=a[g],"("===e.type){var h={token:e,tree:[]};d.tree.push(h),d=h,c.push(d)}else if(")"===e.type){if(!c.length)throw new Error("Unexpected )");c.pop(),d=c[c.length-1]}else d.tree.push({token:e});if(c.length)throw new Error("Missing )");return b},window.espace=window.espace||{},window.espace.Parser=a}(),function(){"use strict";var a={};a.serialize=function(b){switch(b.token.type){case"string":return'"'+b.token.value+'"';case"number":return b.token.value;case"alphanum":return b.token.value;case"(":return"("+b.tree.map(function(b){return a.serialize(b)}).join(" ")+")"}},window.espace=window.espace||{},window.espace.Serializer=a}(),function(){"use strict";function a(a){this.string=a,this.pointer=0,this.marker=0,this.line=1,this.column=1}a.prototype.advance=function(){"\n"===this.current()?(this.line++,this.column=1):this.column++,this.pointer++},a.prototype.setMarker=function(){this.marker=this.pointer},a.prototype.current=function(){return this.string.charAt(this.pointer)},a.prototype.next=function(){return this.string.charAt(this.pointer+1)},a.prototype.hasNext=function(){return this.pointer<this.string.length},a.prototype.getMarked=function(){return this.string.substring(this.marker,this.pointer)},a.prototype.getCoords=function(){return{line:this.line,column:this.column}},window.espace=window.espace||{},window.espace.IterableString=a}(),function(){"use strict";function a(a){function b(a){for(a.setMarker(),a.advance();;){if("\\"==a.current())a.advance();else{if("'"===a.current())return a.advance(),i("string",JSON.parse('"'+a.getMarked().slice(1,-1).replace(/([^\\])(?=")/g,"$1\\")+'"'),a.getCoords());if("\n"===a.current()||!a.hasNext()){var b=new Error("String not properly ended");throw b.coords=a.getCoords(),b}}a.advance()}}function c(a){for(a.setMarker(),a.advance();;){if("\\"===a.current())a.advance();else{if('"'===a.current())return a.advance(),i("string",JSON.parse(a.getMarked()),a.getCoords());if("\n"===a.current()||!a.hasNext()){var b=new Error("String not properly ended");throw b.coords=a.getCoords(),b}}a.advance()}}function d(a){a.setMarker();for(var b=a.current();b>="0"&&"9">=b;)a.advance(),b=a.current();if("."==a.current()){a.advance();for(var b=a.current();b>="0"&&"9">=b;)a.advance(),b=a.current()}if(-1===") \n	".indexOf(a.current())){var c=new Error("Unexpected character '"+a.current()+"' after '"+a.getMarked()+"'");throw c.coords=a.getCoords(),c}return i("number",+a.getMarked(),a.getCoords())}function e(a){for(a.setMarker(),a.advance(),a.advance();;){if("-"===a.current()&&";"===a.next())return a.advance(),a.advance(),i("comment",a.getMarked(),a.getCoords());if(!a.hasNext()){var b=new Error("Multiline comment not properly terminated");throw b.coords=a.getCoords(),b}a.advance()}}function f(a){for(a.setMarker(),a.advance();;){if("\n"===a.current()||!a.hasNext())return a.advance(),i("comment",a.getMarked(),a.getCoords());a.advance()}}function g(a){a.setMarker();for(var b=a.current();b>" "&&"~">=b&&"("!=b&&")"!=b;)a.advance(),b=a.current();return i("alphanum",a.getMarked(),a.getCoords())}function h(a){var b=a.current();return a.advance(),i("whitespace",b,a.getCoords())}a=a||{};var i,j,k=!!a.whitespace,l=!!a.comments,m=!!a.coords;return m?(i=function(a,b,c){return{type:a,value:b,coords:c}},j=function(a,b){return{type:a,coords:b}}):(i=function(a,b){return{type:a,value:b}},j=function(a){return{type:a}}),function(a){for(var i=new espace.IterableString(a+" "),m=[];i.hasNext();){var n=i.current();if("'"===n)m.push(b(i));else if('"'===n)m.push(c(i));else if(";"===n){var o=i.next();if("-"===o){var p=e(i);l&&m.push(p)}else{var p=f(i);l&&m.push(p)}}else if(n>="0"&&"9">=n)m.push(d(i));else if("("===n)m.push(j("(",i.getCoords())),i.advance();else if(")"===n)m.push(j(")",i.getCoords())),i.advance();else if(n>" "&&"~">=n)m.push(g(i));else{var p=h(i);k&&m.push(p)}}return m}}window.espace=window.espace||{},window.espace.Tokenizer=a}();